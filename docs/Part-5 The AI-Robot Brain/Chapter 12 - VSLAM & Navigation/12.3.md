# 12.3: The Navigation Stack (Nav2)

## What is Nav2?

Nav2 is the second generation of the ROS Navigation Stack. It is a collection of ROS 2 packages that provide a complete solution for autonomous robot navigation. Nav2 can take a goal pose (a position and orientation) and generate a safe path to that goal, while avoiding obstacles.

## Nav2 Architecture

Nav2 is a complex system with many different components. The main components are:

*   **Global Planner:** This component is responsible for finding a long-range path from the robot's current location to the goal. It operates on a global costmap, which represents the static obstacles in the environment.
*   **Local Planner (Controller):** This component is responsible for generating motor commands to follow the global plan while reacting to local obstacles. It operates on a local costmap, which represents the immediate surroundings of the robot.
*   **Costmaps:** Nav2 uses two costmaps: a global costmap and a local costmap. The costmaps are 2D grid maps where each cell has a value representing the cost of traversing that cell. Higher values mean the cell is closer to an obstacle.
*   **Behaviors:** Nav2 introduces the concept of "Behaviors", which are special recovery actions the robot can take if it gets stuck. Examples include clearing the costmap, spinning, or waiting.
*   **Lifecycle Management:** Nav2 nodes are managed as lifecycle nodes, which provides a deterministic way to start up and shut down the navigation system.

## Using Nav2

To use Nav2, you need to provide it with:

1.  **A map of the environment:** This can be a pre-made map or a map generated by a SLAM system.
2.  **Sensor data:** Data from sensors like LiDAR or cameras to detect obstacles.
3.  **The robot's pose:** The robot's current position and orientation in the map, typically provided by a localization system like AMCL (Adaptive Monte Carlo Localization) or a SLAM system.
4.  **A goal:** The desired destination for the robot.

Given this information, Nav2 will handle the rest, safely navigating the robot to its goal.
