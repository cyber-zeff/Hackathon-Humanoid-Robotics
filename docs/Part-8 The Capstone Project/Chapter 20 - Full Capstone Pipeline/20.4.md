# 20.4: Navigation using Nav2

## Moving Through the Environment to the Task Location

With an understanding of the overall plan from the LLM and its current location from Isaac Perception (VSLAM), the autonomous humanoid needs to physically move to the relevant areas to execute its tasks. This is handled by the robust ROS 2 Navigation Stack, Nav2.

## Component: Nav2

As detailed in Chapter 12, Nav2 orchestrates the robot's movement:

*   **Input:**
    *   **Global Goal:** A target pose (position and orientation) derived from the LLM's plan (e.g., the entrance to the kitchen).
    *   **Robot Pose:** Continuous updates on the robot's current location from Isaac ROS VSLAM.
    *   **Environmental Data:** Real-time sensor data (LiDAR, depth cameras) for local obstacle avoidance, often integrated into costmaps.
    *   **Map:** A global map of the environment (built by VSLAM or pre-provided).

*   **Process:** Nav2 generates a safe, collision-free path to the goal and executes it by controlling the robot's base.
    1.  **Global Path Planning:** (e.g., A* algorithm) Computes a high-level path across the entire map, avoiding known static obstacles.
    2.  **Local Path Planning/Controller:** (e.g., DWA) Generates immediate velocity commands, dynamically reacting to unexpected obstacles or changes in the environment, while trying to follow the global path.
    3.  **Obstacle Avoidance:** Continuously monitors sensor data to detect and react to new obstacles, such as a person walking in front of the robot.
    4.  **Balance Control (Humanoid-Specific):** During locomotion, the Nav2 output (desired linear and angular velocities) is translated into specific joint commands by the robot's lower-level whole-body controller to maintain balance (Chapter 16).

*   **Output:** Joint commands to the robot's legs and body to achieve the desired movement, ultimately reaching the target location for the next task in the LLM's plan.

## Integrating with the Pipeline

The navigation module ensures that the robot efficiently and safely transports itself to the necessary locations (e.g., kitchen, fridge) so that subsequent manipulation tasks can be performed. It provides feedback to the overall task executive, indicating when a navigation sub-goal has been achieved or if it encountered an insurmountable obstacle.
