# 5.3: Topics

## The Role of Topics in ROS 2

Topics are the primary mechanism for communication between nodes in ROS 2. They are named buses over which nodes can exchange messages. The communication is anonymous: nodes do not know which other nodes are publishing or subscribing to a topic.

This decoupling of nodes makes the system very flexible and scalable. You can add or remove nodes without affecting the rest of the system, as long as they adhere to the message interface of the topics.

## Publishers and Subscribers

Nodes communicate over topics using a publish/subscribe model.

*   A **publisher** is a node that sends messages to a topic.
*   A **subscriber** is a node that receives messages from a topic.

A topic can have multiple publishers and multiple subscribers.

## Messages

The data that is sent over a topic is called a message. A message is a simple data structure, like a C struct or a Python class. ROS 2 provides a set of standard message types for common data such as sensor readings, robot state, and navigation goals. You can also define your own custom message types.

Here is an example of the `String` message type, which is defined in the `std_msgs` package:

```
string data
```

## Creating a Publisher and Subscriber

Here is an example of a simple publisher and subscriber in Python:

**Publisher:**
```python
import rclpy
from rclpy.node import Node
from std_msgs.msg import String

class MyPublisher(Node):
    def __init__(self):
        super().__init__('my_publisher')
        self.publisher_ = self.create_publisher(String, 'chatter', 10)
        timer_period = 0.5  # seconds
        self.timer = self.create_timer(timer_period, self.timer_callback)
        self.i = 0

    def timer_callback(self):
        msg = String()
        msg.data = f'Hello World: {self.i}'
        self.publisher_.publish(msg)
        self.get_logger().info(f'Publishing: "{msg.data}"')
        self.i += 1
```

**Subscriber:**
```python
import rclpy
from rclpy.node import Node
from std_msgs.msg import String

class MySubscriber(Node):
    def __init__(self):
        super().__init__('my_subscriber')
        self.subscription = self.create_subscription(
            String,
            'chatter',
            self.listener_callback,
            10)
        self.subscription  # prevent unused variable warning

    def listener_callback(self, msg):
        self.get_logger().info(f'I heard: "{msg.data}"')
```

## Introspection

You can use the `ros2 topic` command to get information about the topics in the system.

*   `ros2 topic list`: List all the active topics.
*   `ros2 topic info <topic_name>`: Get information about a specific topic.
*   `ros2 topic echo <topic_name>`: Print the messages being published to a topic.
