# 6.3: Writing Python ROS Nodes

## Node Structure

As we saw in the previous chapter, a ROS 2 node is a class that inherits from `rclpy.node.Node`. The main logic of the node is typically implemented in the `__init__` method and in callback functions.

Here is the basic structure of a Python ROS 2 node:

```python
import rclpy
from rclpy.node import Node

class MyNode(Node):
    def __init__(self):
        super().__init__('my_node')
        # ... node initialization ...

    # ... callback functions ...

def main(args=None):
    rclpy.init(args=args)
    node = MyNode()
    rclpy.spin(node)
    rclpy.shutdown()

if __name__ == '__main__':
    main()
```

## Entry Points

For a Python node to be executable, you need to define an entry point in the `setup.py` file of your package. The entry point maps a name to a function in your code that will be called when you run the executable.

Here is an example of the `entry_points` section in a `setup.py` file:

```python
entry_points={
    'console_scripts': [
        'my_node = my_package.my_node:main',
    ],
},
```

This defines an executable called `my_node` that will call the `main` function in the `my_package.my_node` module.

## Building and Running the Node

After writing your node and setting up the entry point, you need to build your workspace:

```bash
cd ~/ros2_ws
colcon build
```

Then, you can run your node using the `ros2 run` command:

```bash
ros2 run my_package my_node
```
